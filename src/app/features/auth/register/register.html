<section class="container-app py-10">
  <div class="mx-auto max-w-md">
    <header class="text-center mb-6">
      <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Register</h1>
      <p class="mt-2 text-sm" style="color: rgb(var(--muted))">
        Create your account to start booking tickets and managing events.
      </p>
    </header>

    <section class="card p-5 sm:p-6">
      <form class="grid gap-4" [formGroup]="formGroup" (ngSubmit)="submit()">
        <!-- Email -->
        <div>
          <label for="register-email" class="block text-sm font-medium mb-1">Email</label>
          <input
            class="input"
            type="email"
            formControlName="email"
            id="register-email"
            placeholder="you@example.com"
            autocomplete="email"
          />

          @if (showEmailRequiredError) {
            <p class="mt-2 text-xs" style="color: rgb(var(--danger))">Email is required.</p>
          }
          @if (showEmailInvalidError) {
            <p class="mt-2 text-xs" style="color: rgb(var(--danger))">
              Please enter a valid email.
            </p>
          }
        </div>

        <!-- Passwords Group -->
        <div formGroupName="passwords" class="grid gap-4">
          <!-- Password -->
          <div>
            <label for="register-password" class="block text-sm font-medium mb-1">Password</label>
            <input
              class="input"
              type="password"
              formControlName="password"
              id="register-password"
              placeholder="••••••••"
              autocomplete="new-password"
            />

            @if (showPasswordRequiredError) {
              <p class="mt-2 text-xs" style="color: rgb(var(--danger))">Password is required.</p>
            }
            @if (showPasswordMinLengthError) {
              <p class="mt-2 text-xs" style="color: rgb(var(--danger))">
                Password must be at least 6 characters.
              </p>
            }
          </div>

          <!-- Repeat Password -->
          <div>
            <label for="repeat-password" class="block text-sm font-medium mb-1">
              Confirm Password
            </label>
            <input
              class="input"
              type="password"
              formControlName="rePassword"
              id="repeat-password"
              placeholder="••••••••"
              autocomplete="new-password"
            />

            @if (showRePasswordRequiredError) {
              <p class="mt-2 text-xs" style="color: rgb(var(--danger))">
                Please confirm your password.
              </p>
            }
            @if (showPasswordsDontMatchError) {
              <p class="mt-2 text-xs" style="color: rgb(var(--danger))">Passwords do not match.</p>
            }
          </div>
        </div>
     
        <!-- Submit Button-->
        <button
          type="submit"
          class="btn btn-primary w-full"
          [disabled]="formGroup.invalid || isLoading()"
        >
          @if (isLoading()) {
            <span class="inline-flex items-center gap-2">
              <span class="animate-spin">⏳</span>

              Creating account...
            </span>
          } @else {
            Create Account
          }
        </button>

        <p class="text-center text-sm" style="color: rgb(var(--muted))">
          Already have an account?
          <a routerLink="/login" class="nav-link">Login</a>
        </p>
      </form>
    </section>
  </div>
</section>
